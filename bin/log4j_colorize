#!/bin/bash

RED="\033[31m"
GREEN="\033[32m"
YELLOW="\033[33m"
BLUE="\033[34m"
PURPLE="\033[35m"
CYAN="\033[36m"
GRAY="\033[37m"
BRIGHT="\033[1m"
ALLOFF="\033[0m"

in=""

colorize() {
	# level=`echo $* | cut -d' ' -f1 | cut -d[ -f2`
	level=`echo $* | cut -d' ' -f1`
	c=${ALLOFF}
	if [ "${level:0:1}" == "[" ]; then
		level=`echo $level | cut -d[ -f2`
		case $level in
		ERROR|FATAL) c=${RED} ;;
		WARN) c=${YELLOW} ;;
		INFO) c=${BRIGHT}${GRAY} ;;
		TRACE|DEBUG) c=${GRAY} ;;
		*) c=${ALLOFF} ;;
		# *) c=${BRIGHT}${BLUE} ;;
		esac
	fi

	echo -e "${c}${*}${ALLOFF}"
}

handleIn() {
	read in
	# echo "IN1: $in"
	in=`echo $in | sed 's/^COL://'`
	# in=`echo $in | sed 's/"/\\"/g'`
	# echo "IN2: $in"
	# [ "$in" != "" ] && return 0 || return 1
}

# READ IN THE INPUT
handleIn
while [ "$in" != "" ]; do
	colorize "$in"
	handleIn
done
